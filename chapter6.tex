\setcounter{chapter}{5}
\chapter{Compact Imbeddings of Sobolev Spaces}

\section{The Rellich-Kondrachov Theorem}

\begin{para}[Restricted Imbeddings]
  Let $\Omega$ be a domain in $\mathbb{R}^n$ and let $\Omega_0$ be a sundomain of $\Omega$.
  Let $X(\Omega)$ denote any of the possible target spaces for imbeddings of $W^{m,p}(\Omega)$, that is,
  $X(\Omega)$ is a space of the form $C_B^j(\Omega)$, $C^j(\overline{\Omega})$,
  $C^{j,\lambda}(\overline{\Omega})$, $L^q(\Omega_k)$, or $W^{j,q}(\Omega_k)$, where $\Omega_k$, $1\leq k\leq n$,
  is the intersection of $\Omega$ with a $k$-dimensional plane in $\mathbb{R}^n$. Since the linear restriction 
  operator $i_{\Omega_0}: u\to u|_{\Omega_0}$ is bounded from $X(\Omega)$ into $X(\Omega_0)$
  (in fact $\|i_{\Omega_0}u\|_{X(\Omega_0)} \leq \|u\|_{X(\Omega)}$) any imbeddings of the form
  \begin{equation}\label{eq:6.1}
    W^{m,p}(\Omega) \to X(\Omega)
  \end{equation}
  can be composed with this restriction to yield the imbedding
  \begin{equation}\label{eq:6.2}
    W^{m,p}(\Omega) \to X(\Omega_0)
  \end{equation}
  and \eqref{eq:6.2} has imbedding constant no larger than \eqref{eq:6.1}.
\end{para}


\begin{para}[Compact Imbeddings]
  Recall that a set $A$ in a normed space is precompact if every sequence of points in $A$ has a subsequence
  converging in norm to an element of the space. An operator between normed spaces is called compact if it
  maps bounded sets into precompact sets, and is called completely continuous if it is continuous and compact.
  (See Paragraph~1.24; for linear operators compactness and complete continuity are equivalent.)
  In this chapter we are concerned with the compactness of imbedding operators which are continuous whenever
  they exist, and so are completely continuous whenever they are compact.

  If $\Omega$ satisfies the hypothesis of the Sobolev imbedding Theorem~4.12 and if $\Omega_0$ is a bounded
  subset of $\Omega$, then, with the exception of certain extreme cases, all the restricted
  imbeddings \eqref{eq:6.1} corresponding to imbeddings asserted in Theorem~4.12 are compact.
  The most important of these compact imbedding results originated in a lemma of Rellich [Re] and was proved
  specifically for Sobolev spaces by Kondrachov [K]. Such compact imbeddings have many important applications
  in analysis, especially to showing that linear elliptic partial differential equations defined over
  bounded domains have discrete spectra. See, for example, [EE] and [ET] for such applications and further
  refinements.
\end{para}

We summarize the various compact imbeddings of $W^{m,p}(\Omega)$ in the following theorem

\begin{theorem}[The Rellich-Kondrachov Theorem]
  Let $\Omega$ be a domain in $\mathbb{R}^n$, let $\Omega_0$ be a bounded subdomain of $\Omega$, and let
  $\Omega_0^k$ be the intersection of $\Omega_0$ with a $k$-dimensional plane in $\mathbb{R}^n$.
  Let $j\geq 0$ and $m\geq 1$ be integers, and let $1\leq p<\infty$.
  \begin{enumerate}[label = \textbf{PART \Roman*},
                    labelindent = 0pt,
                    labelsep = 5pt,
                    leftmargin = 0pt,
                    labelwidth = 3em,
                    itemindent = *,
                    align = left]
    \item If $\Omega$ satisfies the cone condition and $mp<n$, then the following imbeddings are compact:
      \begin{align}
        & W^{j+m,p}(\Omega) \to W^{j,q}(\Omega_0^k) & & \text{if } 0 < n-mp < k \leq n \text{ and } 
          1\leq q < kp/(n-mp), \label{eq:6.3} \\
        & W^{j+m,p}(\Omega) \to W^{j,q}(\Omega_0^k) & & \text{if } n = mp, 1\leq k \leq n \text{ and }
          1\leq q <\infty. \label{eq:6.4}
      \end{align}
    \item If $\Omega$ satisfies the cone condition and $mp > n$, then the following imbeddings are compact:
      \begin{align}
        & W^{j+m,p}(\Omega) \to C_B^j(\Omega_0) \label{eq:6.5} \\
        & W^{j+m,p}(\Omega) \to W^{j,q}(\Omega_0^k) \qquad \text{if } 1\leq q < \infty. \label{eq:6.6}
      \end{align}
    \item If $\Omega$ satisfies the strong local Lipschitz condition, then the following imbeddings are compact:
      \begin{align}
        W^{j+m,p}(\Omega) \to C^j(\overline{\Omega_0}) \qquad & \text{if } mp > n, \label{eq:6.7} \\
        W^{j+m,p}(\Omega) \to C^{j,\lambda}(\overline{\Omega_0}) \qquad & \text{if } mp > n \geq (m-1)p
          \text{ and } 0 < \lambda < m - (n/p). \label{eq:6.8}
      \end{align}
    \item If $\Omega$ is an arbitrary domain in $\mathbb{R}^n$, the imbeddings \eqref{eq:6.3}--\eqref{eq:6.8}
      are compact provided $W^{j+m,p}(\Omega)$ is replaced by $W^{j+m,p}_0(\Omega)$.
  \end{enumerate}
\end{theorem}


\begin{remarks}
  \begin{enumerate}[1.]
    \item Note that if $\Omega$ is bounded, we may have $\Omega_0 = \Omega$ in the statement of the theorem.
    \item If $X$, $Y$, and $Z$ are spaces for which we have the imbeddings $X\to Y$ and $Y\to Z$,
      and one of these imbeddings is compact, then the composite imbedding $X\to Z$ is compact.
      Thus, for example, if $Y\to Z$ is compact, then any sequence $\{u_j\}$ bounded in $X$ will
      be bounded in $Y$ and will therefore have a subsequence $\{u_j'\}$ convergent in $Z$.
    \item Since the extension operator $u\to\tilde{u}$, where $\tilde{u}(x) = u(x)$ if $x\in\Omega$
      and $\tilde{u}(x) = 0$ if $x\notin \Omega$,
      defines an imbedding $W_0^{j+m,p}(\Omega) \to W^{j+m,p}(\mathbb{R}^n)$ by Lemma~3.27, Part IV of Theorem~6.3
      follows from application of Parts I--III to $\mathbb{R}^n$.
    \item In proving the compactness of any of the imbeddings \eqref{eq:6.3}--\eqref{eq:6.8} it is
      sufficient to consider only the case $j=0$. For $j\geq 1$ and $\{u_i\}$ a bounded sequence in
      $W^{j+m,p}(\Omega)$ it is clear that $\{D^\alpha u_i\}$ is bounded in $W^{m,p}(\Omega)$ for each $\alpha$
      such that $|\alpha|\leq j$. Hence $\{D^\alpha u_i|_{\Omega_0^k}\}$ is precompact in $L^q(\Omega_0^k)$
      with $q$ specified as in \eqref{eq:6.3}. It is possible, therefore, to select (by finite induction)
      a subsequence $\{u_i'\}$ of $\{u_i\}$ for which $\{D^\alpha u_i'|_{\Omega_0^k}\}$
      converges in $L^q(\Omega_0^k)$ for each $\alpha$ such that $|\alpha|\leq j$.
      Thus $\{u_i'|_{\Omega_0^k}\}$ converges in $W_0^{j,q}(\Omega_0^k)$ and \eqref{eq:6.3} is compact.
    \item Since $\Omega_0$ is bounded, $C_B^0(\Omega_0^k)\to L^q(\Omega_0^k)$ for $1\leq q\leq \infty$;
      in fact $\|u\|_{0,q,\Omega_0^k} \leq \|u\|_{C_B^0(\Omega_0^k)} \bigl[\vol (\Omega_0^k)\bigr]^{1/q}$.
      Thus the compactness of \eqref{eq:6.6} (for $j=0$) follows from that of \eqref{eq:6.5}.
    \item For the purpose of proving Theorem 6.3 the bounded subdomain $\Omega_0$ of $\Omega$ may be assumed
      to satisfy the cone condition in $\Omega$ does. If $C$ is a finite cone determining the cone condition
      for $\Omega$, let $\widetilde{\Omega}$ be the union of all finite cones congruent to $C$, contained in
      $\Omega$ and having nonempty intersection with $\Omega_0$.
      Then $\Omega_0\subset\widetilde{\Omega}\subset\Omega$ and $\widetilde{\Omega}$ is bounded and satisfies
      the cone condition. If $W^{m,p}(\Omega)\to X(\widetilde{\Omega})$ is compact, then so is
      $W^{m,p}\to X(\Omega_0)$ by restriction.
  \end{enumerate}
\end{remarks}

\begin{para}[Proof of Theorem 6.3, Part III]
  If $mp > n\geq (m-1)p$ and if $0 < \lambda < m-(n/p)$, then there exists $\mu$ such that
  $\lambda < \mu < m-(n/p)$. Since $\Omega_0$ is bounded,
  the imbedding $C^{0,\mu}(\overline{\Omega_0})\to C^{0,\lambda}(\overline{\Omega_0})$ is compact by Theorem~1.34.
  Since $W^{m,p}(\Omega)\to C^{0,\mu}(\overline{\Omega})\to C^{0,\mu}(\overline{\Omega_0})$ by Theorem~4.12
  and restriction, imbedding \eqref{eq:6.8} is compact for $j=0$ by Remark 6.4(2).

  If $mp>n$, let $j^*$ be the nonnegative integer satisfying the inequalities
  $(m-j^*)p > n \geq (m-j^*-1)p$. Then we have the imbedding chain
  \begin{equation}\label{eq:6.9}
    W^{m,p}(\Omega) \to W^{m-j^*,p}(\Omega) \to C^{0,\mu}(\overline{\Omega_0}) \to C(\overline{\Omega_0})
  \end{equation}
  where $0 < \mu < m-j^*-(n/p)$. The last imbeddings in \eqref{eq:6.9} is compact by Theorem 1.34.
  Thus \eqref{eq:6.7} is compact for $j=0$.
\end{para}


\begin{para}[Proof of Theorem 6.3, Part II]
  As noted in Remark 6.4(6), $\Omega_0$ may be assumed to satisfy the cone condition.
  Since $\Omega_0$ is bounded it can, by Lemma~4.22 be written as a finite union,
  $\Omega_0 = \bigcup_{k=1}^M \Omega_k$, where each $\Omega_k$ satisfies the strong local Lipschitz
  condition. If $mp>n$, then
  \[W^{m,p}(\Omega) \to W^{m,p}(\Omega_k) \to C(\overline{\Omega_k}),\]
  the latter imbedding being compact as proved above. If $\{u_i\}$ is a sequence bounded in $W^{m,p}(\Omega)$,
  we may select by finite induction on $k$ a subsequence $\{u_i'\}$ whose restriction to $\Omega_k$
  converges in $C(\overline{\Omega_k})$ for each $k$, $1\leq k\leq M$.
  But this subsequence then converges in $C_B^0(\Omega_0)$, so proving that \eqref{eq:6.5} is compact
  for $j=0$. Therefore \eqref{eq:6.6} is also compact by Remark 6.4(5).
\end{para}


\begin{lemma}\label{lemma:6.7}
  Let $\Omega$ be a domain in $\mathbb{R}^n$, $\Omega_0$ a subdomain of $\Omega$,
  and $\Omega_0^k$ the intersection of $\Omega_0$ with a $k$-dimensional plane in
  $\mathbb{R}^n$ ($1\leq k\leq n$). Let $1\leq q_1<q_0$ and suppose that
  \[ W^{m,p}(\Omega) \to L^{q_0}(\Omega_0^k) \]
  and
  \[ W^{m,p}(\Omega) \to L^{q_1}(\Omega_0^k) \qquad \text{compactly}. \]
  If $q_1\leq q<q_0$, then
  \[ W^{m,p}(\Omega) \to L^q(\Omega_0^k) \qquad \text{compactly}. \]
\end{lemma}

\begin{proof}
  Let $\lambda = q_1(q_0-q)/q(q_0-q_1)$ and $\mu = q_0(q-q_1)/q(q_0-q_1)$.
  Then $\lambda>0$ and $\mu\geq 0$. By H\"older's inequality there exists a constant
  $K$ such that for all $u\in W^{m,p}(\Omega)$,
  \[ \|u\|_{0,q,\Omega_0^k} \leq \|u\|_{0,q_1,\Omega_0^k}^\lambda \|u\|_{0,q_0,\Omega_0^k}^\mu
      \leq K \|u\|_{0,q_1,\Omega_0^k}^\lambda \|u\|_{m,p,\Omega}^\mu. \]
  A sequence bounded in $W^{m,p}(\Omega)$ has a subsequence which converges in
  $L^{q_1}(\Omega_0^k)$ and is therefore a Cauchy sequence in that space.
  Applying the inequality above to differences between terms of this sequence shows
  that it is also a Cauchy sequence in $L^q(\Omega_0^k)$, so the imbedding
  of $W^{m,p}(\Omega)$ into $L^q(\Omega_0^k)$ is compact.
\end{proof}


\begin{para}[Proof of Theorem 6.3, Part I]
  First we deal with (the case $j=0$ of) imbedding (3). Assume for the moment that $k=n$
  and let $q_0 = np/(n-mp)$. In order to prove that the imbedding
  \begin{equation}\label{eq:6.10}
    W^{m,p}(\Omega) \to L^q(\Omega_0), \qquad 1\leq q<q_0,
  \end{equation}
  is compact, it sufficed, by Lemma 6.7, to do so only for $q=1$.
  For $j=1,2,3,\ldots$ let
  \[ \Omega_j = \{x\in\Omega : \dist(x, \partial\Omega) > 2/j \}. \]
  Let $S$ be a set of functions bounded in $W^{m,p}(\Omega)$. We show that $S$
  (when restricted to $\Omega_0$) is precompact in $L^1(\Omega_0)$ by showing that $S$
  satisfies the conditions of Theorem~2.32. Accordingly, let $\epsilon>0$
  be given and for each $u\in W^{m,p}(\Omega)$ set
  \[ \tilde{u}(x) = \begin{cases}
    u(x) & \text{if}\ x\in\Omega_0 \\
    0    & \text{otherwise.}
  \end{cases} \]
  By H\"older's inequality and since $W^{m,p}(\Omega)\to L^{q_0}(\Omega_0)$, we have
  \begin{align*}
    \int_{\Omega_0-\Omega_j} |u(x)| \d x
    & \leq \biggl(\int_{\Omega_0-\Omega_j} |u(x)|^{q_0} \d x\biggr)^{1/q_0}
           \biggl(\int_{\Omega_0-\Omega_j} 1 \d x\biggr)^{1-1/q_0} \\
    & \leq K_1 \|u\|_{m,p,\Omega} [\vol(\Omega_0-\Omega_j)]^{1-1/q_0},
  \end{align*}
  with $K_1$ independent of $u$. Since $q_0>1$ and $\Omega_0$ has finite volume,
  $j$ may be selected large enough to ensure that for every $u\in S$,
  \[\int_{\Omega_0-\Omega_j} |u(x)| \d x < \epsilon \]
  and also, for every $h\in\mathbb{R}^n$,
  \[\int_{\Omega_0-\Omega_j} |\tilde{u}(x+h) - \tilde{u}(x)| \d x < \frac{\epsilon}{2}.\]
  Now if $|h|<1/j$, then $x+th\in \Omega_{2j}$ provided $x\in\Omega_j$ and $0<t<1$.
  If $u\in C^\infty(\Omega)$, it follows that
  \begin{align*}
    \int_{\Omega_j} |u(x+h)-u(x)| \d x
    & \leq \int_{\Omega_j} \d x \int_0^1 \biggl|\frac{\d}{\d t} u(x+th)\biggr| \d t \\
    & \leq |h| \int_0^1 \d t \int_{\Omega_{2j}} |\nabla u(y)| \d y \\
    & \leq |h| \|u\|_{1,1,\Omega_0}
      \leq K_2 |h| \|u\|_{m,p,\Omega},
  \end{align*}
  where $K_2$ is independent of $u$.
  Since $C^\infty(\Omega)$ is dense in $W^{m,p}(\Omega)$, this estimate
  holds for any $u\in W^{m,p}(\Omega)$. Hence if $|h|$ is sufficiently small,
  we have
  \[\int_{\Omega_0} |\tilde{u}(x+h) - \tilde{u}(x)| \d x < \epsilon.\]
  Hence $S$ is precompact in $L^1(\Omega_0)$ by Theorem~2.32 and imbedding (10)
  is compact. Next suppose that $k<n$ and $p>1$.
  The Sobolev Imbedding Theorem~4.12 assures us that $W^{m,p}(\Omega)\to L^{kp/(n-mp)}(\Omega_0^k)$.
  For any $q<kp/(n-mp)$ we can choose $r$ such that $1\leq r<p$, $n-mr<k$,
  and $q\leq kr/(n-mr)<kp/(n-mp)$. Since $\Omega_0$ is bounded, the imbeddings
  \[ W^{m,p}(\Omega) \to W^{m,p}(\Omega_0) \to W^{m,r}(\Omega_0) \]
  exist. By Theorem~5.10 we have
  \begin{align*}
    \|u\|_{q,\Omega_0^k}
    & \leq K_1 \|u\|_{kr/(n-mr), \Omega_0^k} \\
    & \leq K_2 \|u\|_{nr/(n-mr), \Omega_0}^{1-\theta} \|u\|_{m,r,\Omega_0}^\theta \\
    & \leq K_3 \|u\|_{nr/(n-mr), \Omega_0}^{1-\theta} \|u\|_{m,p,\Omega}^\theta,
  \end{align*}
  where $K_j$ and $\theta$ are constants (independent of $u\in W^{m,p}(\Omega)$)
  and $\theta$ satisfies $0<\theta<1$.
  Since $nr/(n-mr) < np/(n-mp)$, a sequence bounded in $W^{m,p}(\Omega)$
  must have a subsequence convergent in $L^{nr/(n-mr)}(\Omega_0)$ by the earlier
  part of this proof. That sequence is therefore a Cauchy sequence in $L^{nr/(n-mr)}(\Omega_0)$,
  and by the above inequality it is therefore a Cauchy sequence in $L^q(\Omega_0^k)$,
  so the imbedding $W^{m,p}(\Omega) \to L^q(\Omega_0^k)$ is compact and so is
  $W^{m,p}(\Omega) \to L^1(\Omega_0^k)$.

  If $p=1$ and $0\leq n-m<k<n$, then necessarily $m\geq 2$.
  Composing the continuous imbedding $W^{m,1}(\Omega)\to W^{m-1,r}(\Omega)$,
  where $r = n/(n-1) > 1$, with the compact imbedding $W^{m-1,r}(\Omega)\to L^1(\Omega_0^k)$,
  (which is compact because $k\geq n-(m-1) > n-(m-1)r$),
  completes the proof of the compactness of (3).

  To prove that imbedding (4) is compact we proceed as follows. If $n=mp$,
  $p>1$ and $1\leq q<\infty$, then we may select $r$ so that $1\leq r<p$,
  $k>n-mr>0$, and $kr/(n-mr)>q$. Assuming again that $\Omega_0$ satisfies
  the cone condition, we have
  \[ W^{m,p}(\Omega) \to W^{m,r}(\Omega_0) \to L^q(\Omega_0^k). \]
  The latter imbedding is compact by (3).
  If $p=1$ and $n=m\geq 2$, then, setting $r=n/(n-1)>1$ so that $n=(n-1)r$,
  we have for $1\leq q<\infty$,
  \[W^{n,1}(\Omega) \to W^{n-1,r}(\Omega) \to L^q(\Omega_0^k), \]
  the latter imbedding being compact as shown immediately above.
  Finally, if $n=m=p=1$, then $k=1$ also. Letting $q_0>1$ be arbitrarily chosen
  we prove the compactness of $W^{1,1}(\Omega) \to L^1(\Omega_0)$ exactly as in the case
  $k=n$ considered at the beginning of this proof.
  Since $W^{1,1}(\Omega)\to L^q(\Omega_0)$ for $1\leq q<\infty$,
  all these imbeddings are compact by Lemma~6.7.
\end{para}


\section{Two Counterexamples}\label{sec:Two-Counterexamples}

\begin{para}[Quasibounded Domains]
  We say that an unbounded domain $\Omega\subset\mathbb{R}^n$ is
  \emph{quasibounded} if
  \[ \lim_{\substack{x\in\Omega\\ |x|\to\infty}} \dist(x,\partial\Omega) = 0. \]
  An unbounded domain is not quasibounded if and only if it contains infinitely
  many pairwise disjoint congruent balls.
\end{para}

\begin{para}
  Two obvious questions arise from consideration of the statement of the Rellich-Kondrachov
  Theorem~6.3. First, can the theorem be extended to cover unbounded $\Omega_0$?
  Second, can the \emph{extreme cases}
  \begin{align*}
    W^{j+m,p}(\Omega) \to W^{j,q}(\Omega_0^k),
    & 0<n-, p<k\leq n, \\
    & q = kp/(n-mp)
  \end{align*}
  and
  \begin{align*}
    W^{j+m,p}(\Omega) \to C^{j,\lambda}(\overline{\Omega_0}),
    & mp>n>(m-1)p, \\
    & \lambda = m-(n/p)
  \end{align*}
  ever be compact? The first of these questions will be investigated later in this chapter.
  For the moment though we show that that answer is negative if $k=n$ and $\Omega_0$
  is not quasibounded. However, the situation changes (see [Lp]) for subspaces of symmetric
  functions.
\end{para}

\begin{example}
  Let $\Omega$ be an unbounded domain in $\mathbb{R}^n$ that is not quasibounded.
  Then there exists a sequence $\{B_i\}$ of mutually disjoint open balls contained
  in $\Omega$ and all having the same positive radius.
  Let $\phi_1\in C_0^\infty(B_1)$ satisfy $\|\phi_1\|_{j,p,B_1}=A_{j,p}>0$
  for each $j=0,1,2,\ldots$ and each $p\geq 1$.
  Let $\phi_i$ be a translate of $\phi_1$ having support in $B_i$.
  Then $\{\phi_i\}$ is a bounded sequence in $W^{m,p}_0(\Omega)$
  for any fixed $m$ and $p$. But for any $q$,
  \[\|\phi_i-\phi_k\|_{j,q,\Omega}
    = \Bigl(\|\phi_i\|_{j,q,B_i}^q + \|\phi_k\|_{j,q,B_i}^q\Bigr)^{1/q}
    = 2^{1/q} A_{j,q} >0\]
  so that $\{\phi_i\}$ cannot have a sequence converging in $W^{j,q}(\Omega)$
  for any $j\geq 0$. Thus no compact imbedding of the form
  $W^{j+m,p}_0(\Omega)\to W^{j,q}(\Omega)$ is possible.
  The non-compactness of the other imbeddings of Theorem 6.3 is proved similarly.
\end{example}

Now we provide an example showing that the answer to the second question
raised in Paragraph 6.10 is always negative.

\begin{example}
  Let integers $j,m,n$ be given with $j\geq 0$ and $m,n\geq 1$.
  Let $p\geq 1$. If $mp<n$, let $k$ be an integer such that $n-mp<k\leq n$
  and let $q=kp/(n-mp)$. If $(m-1)p<n<mp$, let $\lambda=m-(n/p)$. Let $\Omega$
  be a domain in $\mathbb{R}^n$ and let $\Omega_0$ be a nonempty bounded subdomain
  of $\Omega$ having nonempty intersection $\Omega_0^k$ with a $k$-dimensional
  plane $H$ in $\mathbb{R}^n$ which, without loss of generality, we can take
  to be the plane $\mathbb{R}^k$ spanned by the $x_1$, $x_2$, $\ldots$, $x_k$
  coordinate axes. We show that the imbeddings
  \begin{align}
    W^{j+m,p}(\Omega) \to W^{j,q}(\Omega_0^k) \qquad & \text{if}\ mp<n \\
    W^{j+m,p}(\Omega) \to C^{j,\lambda}(\overline{\Omega_0}) \qquad & \text{if}\ (m-1)p\leq n<mp
  \end{align}
  cannot be compact.

  Let $B_r(x)$ be the open ball of radius $r$ in $\mathbb{R}^n$ centred at $x$
  and let $\phi$ be a nontrivial function in $C_0^\infty(B_1(0))$.
  Let $\{a_i\}$ be a sequence of distinct points in $\Omega_0^k$,
  and let $B_i=B_{r_i}(a_i)$ where the positive radii $r_i$ satisfy $r_i\leq 1$
  and are chosen so that the balls $B_i$ are pairwise disjoint and contained in $\Omega_0$.
  We define a scaled, translated dilation $\phi_i$ of $\phi$ with support in $B_i$ by
  \[\phi_i(x) = r_i^{j+m-(n/p)}\phi(y), \qquad \text{where}\ x = a_i+r_iy.\]
  The functions $\phi_i$ have disjoint supports in $\Omega_0$ and, since
  $D^\alpha \phi_i(x) = r^{-|\alpha|} D^\alpha \phi(y)$ and $\d x = r_i^n \d y$,
  we have, for $|\alpha|\leq j+m$,
  \[\int_\Omega |D^\alpha\phi_i(x)|^p \d x
    = r_i^{(j+m-|\alpha|)p}\int_\Omega |\mathscr{D}^\alpha \phi(y)|^p \d y.\]
  Therefore, $\{\phi\}$ is bounded in $W^{j+m,p}(\Omega)$.

  On the other hand, $\d x_1\cdots\d x_k = r_i^k \d y_1\cdots \d y_k$,
  so that if $|\alpha|=j$, then
  \[\int_{\Omega_0^k} |D^\alpha\phi_i(x)|^q \d x_1\cdots\d x_k
    = r_i^{k+q[m-(n/p)]} \int_{\mathbb{R}^n} |D^\alpha\phi(y)|^q \d y_1\cdots\d y_k.\]
  Since $k+q[m-(n/p)] = 0$, this shows that
  \[\|\phi_i\|_{j,q,\Omega_0^k} \geq |\phi_i|_{j,q,\Omega_0^k} = C_1 |\phi|_{j,q,\mathbb{R}^k} > 0\]
  for all $i$, and $\{\phi_i\}$ is bounded away from zero in $W^{j,q}(\Omega_0^k)$.
  The disjointness of the supports of the functions $\phi_i$ now implies that
  $\{\phi\}$ can have no subsequence converging in $W^{j,q}(\Omega_0^k)$,
  so the imbedding (11) cannot be compact.

  Now suppose that $(m-1)p\leq n<mp$. Let $a$ be a point in $B_1(0)$
  and $\beta$ be a particular multiindex satisfying $|\beta|=j$
  such that $|D^\beta\phi(a)|=C_2>0$.
  Let $b_i = a_i+r_ia$ and let $c_i$ be the point on the boundary of $B_i$ closest
  to $b_i$. We have
  \[|D^\beta\phi_i(b_i)| = r_i^{m-(n/p)} C_2 = r_i^\lambda C_2,\]
  and, since $D^\beta\phi_i(c_i) = 0$,
  \[\|\phi_i\|_{C^{j,\lambda}(\overline{\Omega_0})}
    \geq \frac{|D^\beta\phi_i(b_i) - D^\beta\phi_i(c_i)|}{|b_i-c_i|^\lambda} = C_2 > 0.\]
  Again, this precludes the existence of a subsequence of $\{\phi_i\}$
  convergent in $C^{j,\lambda}(\overline{\Omega_0})$, so the imbedding (12)
  cannot be compact.
\end{example}


\begin{remark}
  Observe that the above examples in fact showed that no imbeddings of $W_0^{j+m,p}(\Omega)$,
  not just of the larger space $W^{j+m,p}(\Omega)$, into the appropriate target space
  can be compact. We now examine the possibility of obtaining compact imbeddings of $W_0^{m,p}(\Omega)$
  for certain unbounded domains.
\end{remark}


\section{Unbounded Domains---Compact Imbeddings of $W_0^{m,p}(\Omega)$}

\begin{para}
  Let $\Omega$ be an unbounded domain in $\mathbb{R}^n$. We shall be concerned
  below with determining whether the imbedding
  \begin{equation}\label{eq:6.13}
    W_0^{m,p}(\Omega) \to L^p(\Omega)
  \end{equation}
  is compact. If it is, then it will follow by Remark 6.4(4), Lemma 6.7,
  and the second part of the proof in Paragraph 6.8 that the imbeddings
  \begin{align*}
    & W_0^{j+m,p}(\Omega) \to W^{j,q}(\Omega_k), \qquad
      0< n-mp < k \leq n, \quad p\leq q < kp(n-mp), \\
    & W_0^{j+m,p}(\Omega) \to W^{j,q}(\Omega_k), \qquad
      n = mp, \quad 1\leq k\leq n, p \leq q < \infty
  \end{align*}
  are also compact. See Theorem 6.28 for the corresponding compactness of imbeddings
  into continuous function spaces.

  As was shown in Example 6.11, imbedding \eqref{eq:6.13} cannot be compact unless
  $\Omega$ is quasibounded. In Theorem 6.16 we give a geometric condition on $\Omega$
  that is sufficient to guarantee the compactness of \eqref{eq:6.13},
  and in Theorem 6.19 we give an analytic condition that is necessary and sufficient
  for the compactness of \eqref{eq:6.13}. Both theorems are from [A2].
\end{para}


\begin{para}
  Let $\Omega_r$ denote the set $\{x\in\Omega: |x|\geq r\}$.
  In the following discussion any cube $H$ referred to will have its edges parallel
  to the coordinate axes. For a domain $\Omega$, a cube $H$, and an integer $\nu$
  satisfying $1\leq\nu\leq n$, we define the quantity $\mu_{n-\nu}(H,\Omega)$
  to be the maximum of the $(n-\nu)$-measure of $P(H-\Omega)$ taken over
  all projections $P$ onto $(n-\nu)$-dimensional faces of $H$.
\end{para}


\begin{theorem}
  Let $\nu$ be an integer such that $1\leq\nu\leq n$ and $mp>\nu$
  (or $m=p=\nu=1$). Suppose that for every $\epsilon>0$ there exist
  numbers $h$ and $r$ with $0<h\leq 1$ and $r\geq 0$ such that for every
  cube $H\subset \mathbb{R}^n$ having side $h$ and nonempty intersection
  with $\Omega_r$ we have
  \[\frac{\mu_{n-\nu}(H,\Omega)}{h^{n-\nu}} \geq \frac{h^p}{\epsilon}.\]
  Then imbedding \eqref{eq:6.13} is compact.
\end{theorem}


\begin{remarks}
  \begin{enumerate}
    \item We will deduce this theorem from Theorem~6.19 later in this section.
    \item The above theorem shows that for quasibounded $\Omega$ the compactness
      of (13) may depend in an essential way on the dimension of $\partial\Omega$.
    \item For $\nu = n$, the condition of Theorem~6.16 places only the minimum
      restriction of quasiboundedness on $\Omega$; if $mp>n$ then (13) is compact
      for any quasibounded $\Omega$. It can also be shown that of $p>1$ and $\Omega$
      is quasibounded with boundary having no finite accumulation points,then
      (13) cannot be compact unless $mp>n$.
    \item If $\nu=1$, the condition of Theorem~6.16 places no restrictions on $m$
      and $p$ but requires that $\partial\Omega$ be ``essentially $(n-1)$-dimensional.''
      Any quasibounded domain whose boundary consists of reasonably regular
      $(n-1)$-dimensional surfaces will satisfy that condition.
      An example of such a domain is the ``spiny urchin'' of Figure~4, a domain in $\mathbb{R}^2$
      obtained by deleting from the plane the union of the sets $S_k$, ($k=1,2,\ldots$),
      specified in polar coordinates by
      \[ S_k = \bigl\{(r,\theta): r\geq k,\,\theta = n\pi/2^k,\,n=1,2,\ldots,2^{k+1}\bigr\}. \]
      Note that this domain, though quasibounded, is simply connected and has empty exterior.
    \item More generally, if $\nu$ is the largest integer less than $mp$,
      the condition of Theorem~6.16 requires in a certain sense that the part of the
      boundary of $\Omega$ having dimension at least $n-\nu$ should bound a quasibounded domain.
  \end{enumerate}
\end{remarks}


\begin{para}[A Definition of Capacity]
  Let $H$ be a cube of edge length $h$ in $\mathbb{R}^n$ and let $E$ be a closed subset of $H$.
  Given $m$ and $p$ we define a functional $I_H^{m,p}$ on $C^\infty(H)$ by
  \[ I_H^{m,p}(u) = \sum_{1\leq j\leq m} h^{jp} |u|_{j,p,H}^p
     = \sum_{1\leq |\alpha|\leq m} h^{|\alpha|p} \int_H |D^\alpha u(x)|^p \d x. \]
  Let $C^\infty(H,E)$ denote the set of all nontrivial functions $u\in C^\infty(H)$
  that vanish identically in a neighborhood of $E$. We define the $(m,p)$-capacity
  $Q^{m,p}(H,E)$ of $E$ in $H$ by
  \[ Q^{m,p}(H,E) = \inf \biggl\{ \frac{I_H^{m,p}(u)}{\|u\|_{0,p,H}^p}
     : u\in C^\infty(H,E)\biggr\}. \]
  Clearly $Q^{m,p}(H,E) \leq Q^{m+1,p}(H,E)$ and, whenever $E\subset F\subset H$,
  we have $Q^{m,p}(H,E) \leq Q^{m,p}$(H,F).
\end{para}

The following theorem characterizes those domains for which imbedding (13)
is compact in terms of this capacity.


\begin{theorem}
  Imbedding (13) is compact if and only if $\Omega$ satisfies the following condition:
  For every $\epsilon>0$ there exists $h\leq 1$ and $r>0$ such that the inequality
  \[ Q^{m,p}(H,H-\Omega) \geq h^p/\epsilon \]
  holds for every $n$-cube $H$ of edge length $h$ having nonempty intersection
  with $\Omega_r$. (This condition clearly implies that $\Omega$ is quasibounded.)
\end{theorem}

Prior to proving this theorem we prepare the following lemma.


\begin{lemma}
  There exists a constant $K(m,p)$ such that for any $n$-cube $H$ of edge length $h$,
  any measurable subset $A$ of $H$ with positive volume, and any $u\in C^1(H)$, we have
  \[ \|u\|_{0,p,H}^p \leq \frac{2^{p-1}h^n}{\vol(A)} \|u\|_{0,p,A}^p
      + K \frac{h^{n+p}}{\vol(A)} \|\nabla u\|_{0,p,H}^p. \]
\end{lemma}


\begin{proof}
  Let $y\in A$ and $x=(\rho,\phi)\in H$, where $(\rho,\phi)$ denote spherical coordinates
  centred at $y$, in terms of which the volume element is given by
  $\d x = \omega(\phi) \rho^{n-1} \d\rho\d\phi$. Let $\partial H$ be specified by $\rho = f(\phi)$,
  $\phi\in\Sigma$. Clearly $f(\phi) \leq\sqrt{n}h$. Since
  \[ u(x) = u(y) + \int_0^\rho \frac{\d}{\d r} u(r,\phi) \d r, \]
  we have by Lemma~2.2 and H\"older's inequality
  \begin{align*}
    & \int_H |u(x)|^p \d x \\
    & \leq 2^{p-1} h^n |u(y)|^p + 2^{p-1} \int_H \biggl|\int_0^\rho
        \frac{\d}{\d r} u(r,\phi) \d r\biggr|^p \d x \\
    & \leq 2^{p-1} h^n |u(y)|^p + 2^{p-1} \int_\Sigma \omega(\phi) \d\phi
        \int_0^{f(\phi)} \rho^{n+p-2} \d\rho \int_0^\rho |\nabla u(r,\phi)|^p \d r \\
    & \leq 2^{p-1} h^n |u(y)|^p + \frac{2^{p-1}}{n+p-1} (\sqrt{n}h)^{n+p-1}
        \int_H \frac{|\nabla u(z)|^p}{|z-y|^{n-1}} \d z.
  \end{align*}
  Integrating $y$ over $A$ and using Lemma~4.64 we obtain
  \[ \vol(A) \|u\|_{0,p,H}^p \leq 2^{p-1} h^n \|u\|_{0,p,A}^p
      + K h^{n+p} \|\nabla u\|_{0,p,H}^p, \]
  as required.
\end{proof}


\begin{para}[Proof of Theorem 6.19--Necessity]
  Suppose that $\Omega$ does not satisfy the condition stated in the theorem.
  Then there exists a finite constant $K_1 = 1/\epsilon$ such that for every $h$
  with $0<h\leq 1$ there exists a sequence $\{H_j\}$ of mutually disjoint cubes of
  edge length $h$ which intersect $\Omega$ and for which
  \[ Q^{m,p}(H_j, H_j-\Omega) < K_1 h^p. \]
  By the definition of capacity, for each such cube $H_j$ there exists a function
  $u_j\in C^\infty(H_j,H_j-\Omega)$ such that $\|u_j\|_{0,p,H_j}^p = h^n$,
  $\|\nabla u_j\|_{0,p,H_j}^p \leq K_1h^n$, and $\|u_j\|_{m,p,H_j}^p\leq K_2(h)$.
  Let $A_j = \{x\in H_j: |u_j(x)|<\frac12\}$. By the previous Lemma we have
  \[ h^n \leq \frac{2^{p-1}h^n}{\vol(A_j)} \cdot \frac{\vol(A_j)}{2^p} 
      + \frac{KK_1}{\vol(A_j)} h^{2n+p} \]
  from which it follows that $\vol(A_j) \leq K_3 h^{n+p}$.
  Let us choose $h$ so small that $K_3 h^p\leq\frac13$, whence $\vol(A_j) \leq \frac13 \vol(H_j)$.
  Choose functions $w_j\in C_0^\infty(H_j)$ such that $w_j(x)=1$ on a subset $S_j$ of $H_j$
  having volume no less than $\frac23 \vol(H_j)$, and such that
  \[ \sup_j \max_{|\alpha|\leq m} \sup_{x\in H_j} |D^\alpha w_j(x)| = K_4(h) < \infty. \]
  Then $v_j = u_jw_j \in C_0^\infty(H_j\cap\Omega)\subset C_0^\infty(\Omega)$
  and $|v_j(x)|\geq\frac12$ on $S_j\cap (H_j-A_j)$, a set of volume no less than
  $h^n/3$. Hence $\|v_j\|_{0,p,H_j}^p \geq h^n/3 \cdot 2^p$. On the other hand
  \[ \int_{H_j} |D^\alpha u_j(x)|^p \cdot |D^\beta w_j(x)|^p \d x
      \leq K_4(h) K_2(h) \]
  provided $|\alpha|,|\beta|\leq m$. Hence $\{v_j\}$ is a bounded sequence in $W_0^{m,p}(\Omega)$.
  Since the supports of the functions $\{v_j\}$ are disjoint,
  $\|v_i-v_j\|_{0,p,\Omega}^p \geq 2h^n/3 \cdot 2^p$ so the imbedding (13)
  cannot be compact.
\end{para}


\begin{para}[Proof of Theorem 6.19--Sufficiency]
  Suppose $\Omega$ satisfies the condition stated in the theorem.
  Let $\epsilon>0$ be given and choose $r\geq 0$ and $h\leq 1$
  such that for every cube $H$ of edge $h$ intersecting $\Omega_r$
  we have $Q^{m,p}(H,H-\Omega)\geq h^p/\epsilon^p$. Then for every
  $u\in C_0^\infty(\Omega)$ we obtain
  \[ \|u\|_{0,p,H}^p \leq \frac{\epsilon^p}{h^p} I_H^{m,p}(u) \leq \epsilon^p \|u\|_{m,p,H}^p. \]
  Since a neighborhood of $\Omega_r$ can be tessellated by such cubes $H$
  we have by summation
  \[ \|u\|_{0,p,\Omega_r} \leq \epsilon \|u\|_{m,p,\Omega}. \]
  That any bounded set $S$ in $W_0^{m,p}(\Omega)$ is precompact in $L^p(\Omega)$
  now follows from Theorem~2.33 and~6.3.
\end{para}


\begin{lemma}
  There is a constant $K$ independent of $h$ such that for any cube $H$
  in $\mathbb{R}^n$ having edge length $h$, for every $q$ satisfying $p\leq q\leq np/(n-mp)$
  (or $p\leq q<\infty$ if $mp=n$, or $p\leq q\leq\infty$ if $mp>n$),
  and for every $u\in C^\infty(H)$ we have
  \[ \|u\|_{0,q,H} \leq K\biggl(\sum_{|\alpha|\leq m} h^{|\alpha|p-n+np/q}
      \|D^\alpha u\|_{0,p,H}^p\biggr)^{1/p}. \]
\end{lemma}


\begin{proof}
  We may suppose $H$ to be centred at the origin and let $\tilde{H}$ be the cube
  of unit edge concentric with $H$ and having edges parallel to those of $H$.
  The stated inequality holds for $\tilde{u}\in C^\infty(\tilde H)$ by the Sobolev
  imbedding theorem. It then follows for $H$ via the dilation $u(x)=\tilde u(x/h)$.
\end{proof}


\begin{lemma}
  If $mp>n$ (or $m=p=n=1$), there exists a constant $K=K(m,p,n)$ such that
  for every cube $H$ of edge length $h$ in $\mathbb{R}^n$ and every $u\in C^\infty(H)$
  that vanishes in a neighborhood of some point $y\in H$, we have
  \[ \|u\|_{0,p,H}^p \leq K I_H^{m,p}(u). \]
\end{lemma}

\begin{proof}
  Let $(\rho,\phi)$ be spherical coordinates centred at $y$. Then
  \[ u(\rho,\phi)  = \int_0^\rho \frac{\d}{\d t} u(t,\phi) \d t. \]
  If $n>(m-1)p$, then let $q = np/(n-mp+p)$, so that $q>n$.
  Otherwise let $q>\max\{n,p\}$ be an arbitrary and finite. If $(\rho,\phi)\in H$,
  then by H\"older's inequality
  \begin{align*}
    |u(\rho,\phi)|^q \rho^{n-1}
    & \leq \bigl(\sqrt n h\bigr)^{n-1} \int_0^\rho \biggl|\frac{\d}{\d t} u(t,\phi)\biggr|^q
      t^{n-1} \d t \biggl(\int_0^{\sqrt n h} t^{-(n-1)/(q-1)} \d t\biggr)^{q-1} \\
    & \leq K_1 h^{q-1} \int_0^\rho \biggl|\frac{\d}{\d t} u(t,\phi)\biggr|^q t^{n-1} \d t.
  \end{align*}
  It follows, using the previous lemma with $m-1$ in place of $m$, that
  \begin{equation}\label{eq:6.14}
    \begin{aligned}
      \|u\|_{0,q,H}^q
      & \leq K_2 h^q \int_H |\nabla u(x)|^q \d x \\
      & \leq K_2 h^q \sum_{|\alpha|=1} \|D^\alpha u\|_{0,q,H}^q \\
      & \leq K_3 h^q \sum_{|\alpha|=1} \biggl(\sum_{|\beta|\leq m-1}
          h^{|\beta|p-n+n/q} \|D^{\alpha+\beta} u\|_{0,p,H}^p \biggr)^{q/p}.
    \end{aligned}
  \end{equation}
  If $p>n$ (or $p=n=1$) the desired result follows directly from (14)
  with $q=p$:
  \[ \|u\|_{0,p,H}^p \leq K I_H^{1,p}(u) \leq K I_H^{m,p}(u). \]
  Otherwise, a further application of H\"older's inequality yields
  \begin{align*}
    \|u\|_{0,p,H}^p
    & \leq \|u\|_{0,q,H}^p (\vol(H))^{(q-p)/q} \\
    & \leq K_2^{p/q} \sum_{1\leq |\gamma|\leq m} h^{|\gamma|p} \|D^\gamma u\|_{0,p,H}^p
        = K I_H^{m,p(u)}. \qedhere
  \end{align*}
\end{proof}


\begin{para}[Proof of Theorem 6.16]
  Let $mp>\nu$ (or $m=p=\nu=1$) and let $H$ be a cube in $\mathbb{R}^n$ for which
  $\mu_{n-\nu}(H,\Omega)\geq h^p/\epsilon$. Let $P$ be the maximal projection of
  $H-\Omega$ onto an $(n-\nu)$-dimensional face of $H$ and let $E=P(H-\Omega)$.
  Without loss of generality we may assume that the face $F$ of $H$ containing $E$
  is parallel to the $x_{\nu+1},\ldots,x_n$ coordinate plane. For each point
  $x=(x',x'')$ in $E$, where $x' = (x_1,\ldots,x_\nu)$ and $x'' = (x_{\nu+1},\ldots,x_n)$
  let $H_{x''}$ be the $\nu$-dimensional cube of edge length $h$ in which $H$
  intersects the $\nu$-plane through $x$ normal to $F$. By the definition of $P$
  there exists $y\in H_{x''}-\Omega$. If $u\in C^\infty(H,H-\Omega)$,
  then $u(\cdot,x'')\in C^\infty(H_{x''},y)$. Applying the previous lemma to $u(\cdot,x'')$
  we obtain
  \[ \int_{H_{x''}} |u(x',x'')|^p \d x' \leq K_1 \sum_{1\leq |\alpha|\leq m}
      h^{|\alpha|p} \int_{H_{x''}} |D^\alpha u(x',x'')|^p \d x', \]
  where $K_1$ is independent of $H$, $x''$, and $u$. Integrating this inequality
  over $E$ and denoting $H'=\{x':x=(x',x'')\in H\ \text{for some}\ x''\}$, we obtain
  \[\|u\|_{0,p,H'\times E}^p \leq K_1 I_{H'\times E}^{m,p}(u)
      \leq K_1 I_H^{m,p}(u).\]
  Now we apply Lemma~6.20 with $A=H'\times E$ so that $\vol(A) = h^\nu \mu_{n-\nu}(H,\Omega)$.
  This yields
  \[\|u\|_{0,p,H}^p \leq K_2 \frac{h^{n-\nu}}{\mu_{n-\nu}(H,\Omega)} I_H^{m,p}(u),\]
  where $K_2$ is independent of $H$. It follows that
  \[Q^{m,p}(H,H-\Omega) \geq \frac{\mu_{n-\nu}(H,\Omega)}{K_2 h^{n-\nu}}
    \geq \frac{h^p}{\epsilon K_2}.\]
  Hence $\Omega$ satisfies the hypothesis of Theorem~6.19 if it satisfies
  that of Theorem~6.16.
\end{para}

The following two interpolation lemmas enable us to extend Theorem~6.16
to cover imbeddings into spaces of continuous functions.

\begin{lemma}
  Let $1\leq p<\infty$ and $0<\mu\leq 1$. There exists a constant $K=K(n,p,\mu)$
  such that for every $u\in C_0^\infty(\mathbb{R}^n)$ we have
  \begin{equation}\label{eq:6.15}
    \sup_{x\in\mathbb{R}^n} |u(x)| \leq K \|u\|_{0,p,\mathbb{R}^n}^\lambda
      \biggl(\sup_{\substack{x,y\in\mathbb{R}^n}\\ x\neq y}
        \frac{|u(x)-u(y)|}{|x-y|^\mu}\biggr)^{1-\lambda},
  \end{equation}
  where $\lambda=p\mu/(n+p\mu)$.
\end{lemma}

\begin{proof}
  We may assume
  \[\sup_{x\in\mathbb{R}^n} |u(x)| = N > 0
    \qquad \text{and} \qquad
    \sup_{\substack{x,y\in\mathbb{R}^n}\\ x\neq y} \frac{|u(x)-u(y)|}{|x-y|^\mu} = M < \infty.\]
  Let $\epsilon$ satisfy $0<\epsilon\leq N/2$. Then there exists a point
  $x_0$ in $\mathbb{R}^n$ such that we have $|u(x_0)|\geq N-\epsilon\geq N/2$.
  Now $|u(x_0)-u(x)|/|x_0-x|^\mu \leq M$ for all $x$, so
  \[ |u(x)| \geq |u(x_0)| - M|x_0-x|^\mu \geq \frac12 |u(x_0)| \]
  provided $|x-x_0|\leq (N/4M)^{1/\mu} = r$. Hence
  \[ \int_{\mathbb{R}^n} |u(x)|^p \d x
    \geq \int_{B_r(x_0)} \biggl(\frac{|u(x_0)|}{2}\biggr)^p \d x
    \geq K_1 \biggl(\frac{N-\epsilon}{2}\biggr)^p \biggl(\frac{N}{4M}\biggr)^{n/\mu}. \]
  Since this holds for arbitrarily small $\epsilon$ we have
  \[ \|u\|_{0,p,\mathbb{R}^n} \geq \biggl(\frac{K_1^{1/p}}{2\cdot 4^{n/\mu p}}\biggr)
      N^{1+(n/\mu p)} M^{-n/\mu p} \]
  from which (15) follows at once.
\end{proof}


\begin{lemma}
  Let $\Omega$ be an arbitrary domain in $\mathbb{R}^n$, and let
  $0<\lambda<\mu\leq 1$. For every function $u\in C^{0,\mu}(\overline{\Omega})$
  we have
  \begin{equation}\label{eq:6.16}
    \|u\|_{C^{0,\lambda}(\overline{\Omega})} \leq 3^{1-\lambda/\mu}
    \|u\|_{C(\overline{\Omega})}^{1-\lambda/\mu} \|u\|_{C^{0,\mu}(\overline{\Omega})}^{\lambda/\mu}.
  \end{equation}
\end{lemma}


\begin{proof}
  Let $p = \mu/\lambda$ and $p'=p/(p-1)$. Let
  \begin{align*}
    & A_1 = \|u\|_{C(\overline{\Omega})}^{1/p}, \qquad
      B_1 = \sup_{\substack{x,y\in\Omega\\ x\neq y}} \biggl(\frac{|u(x)-u(y)|}{|x-y|^\mu}\biggr)^{1/p}, \\
    & A_2 = \|u\|_{C(\overline{\Omega})}^{1/p'}, \qquad
    B_1 = \sup_{\substack{x,y\in\Omega\\ x\neq y}} |u(x)-u(y)|^{1/p'}.
  \end{align*}
  Clearly $A_1^p + B_1^p = \|u\|_{C^{0,\mu}(\overline{\Omega})}$ and
  $B_2^{p'}\leq 2\|u\|_{C(\overline{\Omega})}$.
  By H\"older's inequality for sums we have
  \begin{align*}
    \|u\|_{C^{0,\lambda}(\overline{\Omega})}
    & = \|u\|_{C(\overline{\Omega})}
        + \sup_{\substack{x,y\in\Omega\\ x\neq y}} \frac{|u(x)-u(y)|}{|x-y|^\lambda} \\
    & \leq A_1A_2 + B_1B_2 \\
    & \leq (A_1^p+B_1^p)^{1/p} (A_2^{p'} + B_2^{p'})^{1/p'} \\
    & \leq \|u\|_{C^{0,\mu}(\overline{\Omega})}^{\lambda/\mu}
        (3\|u\|_{C(\overline{\Omega})})^{1-\lambda/\mu}
  \end{align*}
  as required.
\end{proof}


\begin{theorem}
  Let $\Omega$ satisfy the hypotheses of Theorem~6.16. Then the following imbeddings are compact:
  \begin{alignat}{3}
    W_0^{j+m,p}(\Omega) & \to C^j(\overline{\Omega})  &\qquad& \text{if} &\quad& mp>n \label{eq:6.17} \\
    W_0^{j+m,p}(\Omega) & \to C^{j,\lambda}(\overline{\Omega}) && \text{if} && mp>n\geq (m-1)p\ \text{and} \notag \\
    &&&&& 0<\lambda<m-(n/p). \label{eq:6.18}
  \end{alignat}
\end{theorem}

\begin{proof}
  It is sufficient to deal with the case $j=0$. If $mp>n$, let $j^*$ be the nonnegative integer
  satisfying $(m-j^*)p>n\geq (m-j^*-1)p$. Then we have the chain of imbeddings
  \[ W_0^{m,p}(\Omega) \to W_0^{m-j^*,p}(\Omega) \to C^{0,\mu}(\overline{\Omega})
      \to C(\overline{\Omega}), \]
  where $0<\mu<m-j^*-(n/p)$. If $\{u_i\}$ is a bounded sequence in $W_0^{m,p}(\Omega)$,
  then it is also bounded in $C^{0,\mu}(\overline{\Omega})$.
  By Theorem~6.16, $\{u_i\}$ has a subsequence $\{u_i'\}$ converging in $L^p(\Omega)$.
  By (15), which applies by completion to the functions $u_i$,
  this subsequence is a Cauchy sequence in $C(\overline{\Omega})$ and so converges there.
  Hence (17) is compact for $j=0$. Furthermore, if $mp>n\geq (m-1)p$
  (that is, if $j^*=0$) and $0<\lambda<\mu$. then by (16) $\{u_i'\}$ is also a Cauchy sequence
  in $C^{0,\lambda}(\overline{\Omega})$ whence (18) is also compact.
\end{proof}


\section{An Equivalent Norm for $W_0^{m,p}(\Omega)$}

\begin{para}[Domains of Finite Width]
  Consider the problem of determining for what domains $\Omega$ in $\mathbb{R}^n$ is
  the seminorm
  \[ |u|_{m,p,\Omega} = \biggl(\sum_{|\alpha|=m} \|D^\alpha u\|^p_{0,p,\Omega}\biggr)^{1/p} \]
  actually a norm on $W_0^{m,p}(\Omega)$ equivalently to the standard norm
  \[ \|u\|_{m,p,\Omega} = \biggl(\sum_{|\alpha|\leq m} \|D^\alpha u\|^p_{0,p,\Omega}\biggr)^{1/p}. \]
  This problem is closely related to the problem of determining for which unbounded
  domains $\Omega$ the imbedding $W_0^{m,p}(\Omega)\to L^p(\Omega)$ is compact
  because both problems depend on estimates for the $L^p$ norm of a function in terms of
  $L^p$ estimates for its derivatives.

  We can easily show that the equivalence of the above seminorm and norm for a domain
  of \emph{finite width}, that is, a domain in $\mathbb{R}^n$ that lies between two
  parallel planes of dimension $(n-1)$. In particular, this is true for any bounded domain.
\end{para}


\begin{theorem}[Poincar\'e's Inequality]
  If domain $\Omega\subset\mathbb{R}^n$ has finite width, then there exists a constant
  $K=K(p)$ such that for all $\phi\in C_0^\infty(\Omega)$
  \begin{equation}\label{eq:6.19}
    \|\phi\|_{0,p,\Omega} \leq K |\phi|_{1,p,\Omega}.
  \end{equation}
  This inequality is known as \emph{Poincar\'e's Inequality}.
\end{theorem}

\begin{proof}
  Without loss of generality we can assume that $\Omega$ lies between the hyperplanes
  $x_n=0$ and $x_n=c>0$. Denoting $x=(x',x_n)$, where $x'=(x_1,\ldots,x_{n-1})$,
  we have for any $\phi\in C_0^\infty(\Omega)$,
  \[ \phi(x) = \int_0^{x_n} \frac{\d}{\d t} \phi(x',t) \d t \]
  so that, by H\"older's inequality,
  \begin{align*}
    \|\phi\|_{0,p,\Omega}^p
    & = \int_{\mathbb{R}^{n-1}} \d x' \int_0^c |\phi(x)|^p \d x_n \\
    & \leq \int_{\mathbb{R}^{n-1}} \d x' \int_0^c x_n^{p-1} \d x_n \int_0^c
        |D_n \phi(x',t)|^p \d t \\
    & \leq \frac{c^p}{p} |\phi|_{1,p,\Omega}^p.
  \end{align*}
  Inequality (19) follows with $K = c/p^{1/p}$.
\end{proof}


\begin{corollary}
  If $\Omega$ has finite width, $|\cdot|_{m,p,\Omega}$ is a norm on $W^{m,p}(\Omega)$
  equivalent to the standard norm $\|\cdot\|_{m,p,\Omega}$.
\end{corollary}

\begin{proof}
  If $\phi\in C_0^\infty(\Omega)$ then any derivative of $\phi$ also belongs to
  $C_0^\infty(\Omega)$. Now (19) implies
  \[ |\phi|_{1,p,\Omega}^p \leq \|\phi\|_{1,p,\Omega}^p
      = \|\phi\|_{0,p,\Omega}^p + |\phi|_{1,p,\Omega}^p
      \leq (1+K^p) |\phi|_{1,p,\Omega}^p, \]
  and successive iterations of this inequality to derivatives $D^\alpha\phi$,
  ($|\alpha|\leq m-1$) leads to
  \[ |\phi|_{m,p,\Omega}^p \leq \|\phi\|_{m,p,\Omega}^p \leq K_1 |\phi|_{m,p,\Omega}^p. \]
  By completion, this holds for all $u$ in $W_0^{m,p}(\Omega)$.
\end{proof}


\begin{para}[Quasicylindrical Domains]
  An unbounded domain $\Omega$ in $\mathbb{R}^n$ is called \emph{Quasicylindrical} if
  \[ \limsup_{x\in\Omega,\,|x|\to\infty} \dist(x,\partial\Omega) < \infty. \]
  Every quasibounded domain is quasicylindrical, as is every (unbounded) domain of finite
  width. The seminorm $|\cdot|_{m,p,\Omega}$ is not equivalent to the norm $\|\cdot\|_{m,p,\Omega}$
  on $W_0^{m,p}(\Omega)$ for unbounded $\Omega$ if $\Omega$ is not quasicylindrical.
  We leave it to the reader to construct a suitable counterexample.

  The following theorem is clearly analogous to Theorem~6.16.
\end{para}


\begin{theorem}
  Suppose there exist an integer $\nu$ and constants $K$, $R$, and $h$ such that
  $1\leq\nu\leq n$, $0<K\leq 1$, $0\leq R<\infty$, and $0<h<\infty$.
  Suppose also that either $\nu<p$ or $\nu=p=1$, and that for every cube $H$
  in $\mathbb{R}^n$ having edge length $h$ and nonempty intersection with
  $\Omega_R = \{x\in\Omega : |x|\geq R\}$ we have
  \[ \frac{\mu_{n-\nu}(H,\Omega)}{h^{n-\nu}} \geq K, \]
  where $\mu_{n-\nu}(H,\Omega)$ is as defined prior to the statement of Theorem~6.16.
  Then $|\cdot|_{m,p,\Omega}$ is a norm on $W_0^{m,p}(\Omega)$
  equivalent to the standard norm $\|\cdot\|_{m,p,\Omega}$.
\end{theorem}

\begin{proof}
  As observed in the previous Corollary, it is again sufficient to prove that
  $\|u\|_{0,p,\Omega} \leq K_1 |u|_{1,p,\Omega}$ holds for all $u\in C_0^\infty(\Omega)$.
  Let $H$ be a cube of edge length $h$ having nonempty intersection with $\Omega_R$.
  Since $\nu<p$ (or $\nu=p=1$) the proof of Theorem~6.16 shows that
  \[ Q^{1,p}(H,H-\Omega) \geq \frac{\mu_{n-\nu}(H,\Omega)}{K_2 h^{n-\nu}}
      \geq \frac{K}{K_2} \]
  for all $u\in C_0^\infty(\Omega)$, $K_2$ beging independent of $u$. Hence
  \[ \|u\|_{0,p,H}^p \leq (K_2/K) I_H^{1,p} = K_3 |u|_{1,p,H}^p. \]
  By summing this inequality over the cubes comprising a tessellation of some
  neighborhood of $\Omega_R$, we obtain
  \begin{equation}\label{eq:6.20}
    \|u\|_{0,p,\Omega_R}^p \leq K_3 |u|_{1,p,\Omega}^p.
  \end{equation}
  It remains to be proven that
  \[ \|u\|_{0,p,B_R}^p \leq K_3 |u|_{1,p,\Omega}^p, \]
  where $B_R = \{x\in\mathbb{R}^n : |x|<R\}$. Let $(\rho,\phi)$ denote the spherical
  coordinates of the point $x\in\mathbb{R}^n$ ($\rho>0$, $\phi\in\Sigma$)
  so that $\d x = \rho^{n-1} \omega(\phi) \d\rho\d\phi$.
  For any $u\in C^\infty(\mathbb{R}^n)$ we have
  \[ u(\rho,\phi) = u(\rho+R,\phi) - \int_\rho^{R+\rho} \frac{\d}{\d t} u(t,\phi) \d t \]
  so that (by Lemma~2.2)
  \[ |u(\rho,\phi)|^p \leq 2^{p-1} |u(\rho+R,\phi)|^p + 2^{p-1}R^{p-1}\rho^{1-n}
      \int_\rho^{R+\rho} |\nabla u(t,\phi)|^p t^{n-1} \d t. \]
  Hence
  \begin{align*}
    \|u\|_{0,p,B_R}^p
    & = \int_{\Sigma} \omega(\phi) \d\phi \int_0^R |u(\rho,\phi)|^p \rho^{n-1} \d\rho \\
    & \leq 2^{p-1} \int_{\Sigma} \omega(\phi) \d\phi \int_0^R |u(\rho+R,\phi)|^p
        (\rho+R)^{n-1} \d\rho \\
    & \quad + 2^{p-1} R^p \int_{\Sigma} \omega(\phi) \d\phi \int_0^{2R}
        |\nabla u(t,\phi)|^p t^{n-1} \d t.
  \end{align*}
  Therefore, we have for $u\in C_0^\infty(\Omega)$
  \begin{align*}
    \|u\|_{0,p,B_R}^p
    & \leq 2^{p-1} \|u\|_{0,p,B_{2R}-B_R}^p + 2^{p-1} R^p |u|_{1,p,B_{2R}}^p \\
    & \leq 2^{p-1} \|u\|_{0,p,\Omega_R}^p + 2^{p-1} R^p |u|_{1,p,\Omega}^p \leq K_4 |u|_{1,p,\Omega}^p
  \end{align*}
  by (20).
\end{proof}


\section{Unbounded domains---Decay at Infinity}

\begin{para}
  The fact that elements of $W_0^{m,p}(\Omega)$ vanish in a generalized sense on the
  boundary of $\Omega$ played a critical role in our showing that the imbedding
  \begin{equation}\label{eq:6.21}
    W_0^{m,p}(\Omega) \to L^p(\Omega)
  \end{equation}
  is compact for certain unbounded domains $\Omega$. Since elements
  of $W^{m,p}(\Omega)$ do not have this property, there remains a question of whether
  an imbedding of the form
  \begin{equation}\label{eq:6.22}
    W^{m,p}(\Omega) \to L^p(\Omega)
  \end{equation}
  can ever be compact for unbounded $\Omega$, or even for bounded $\Omega$ which are
  sufficiently irregular that no imbedding of the form
  \begin{equation}\label{eq:6.23}
    W^{m,p}(\Omega) \to L^q(\Omega)
  \end{equation}
  can exist for any $q>p$. Note that if $\Omega$ has finite volume, the existence
  of imbedding~\eqref{eq:6.23} for some $q>p$ implies the compactness of imbedding~\eqref{eq:6.22}
  by the method of the first part of the proof in Paragraph 6.8.
  By Theorem~4.46 imbedding~\eqref{eq:6.23} cannot, however, exist if $q>p$ and $\Omega$
  is unbounded but has finite volume.
\end{para}


\begin{example}
  For $j=1,2,\dots$ let $B_j$ be an open ball in $\mathbb{R}^n$ having radius
  $r_j$, and suppose that $\overline{B_j}\cap\overline{B_i}$ is empty whenever
  $j\neq i$. Let $\Omega = \cup_{j=1}^\infty B_j$. Note that $\Omega$ may be
  bounded or unbounded. The sequence $\{u_j\}$ defined by
  \[ u_j(x) = \begin{cases}
    (\vol(B_j))^{-1/p} & \text{if}\ x\in\overline{B_j} \\
    0                  & \text{if}\ x\notin\overline{B_j}
  \end{cases}\]
  is bounded in $W^{m,p}(\Omega)$ for every integer $m\geq 0$, but is not
  precompact in $L^p(\Omega)$ no matter how fast $r_j\to 0$ as $j\to\infty$.
  (Of course, imbedding \eqref{eq:6.21} is compact by Theorem~6.16 provided
  $\lim_{j\to\infty} r_j = 0$.) Even if $\Omega$ is bounded, imbedding~\eqref{eq:6.23}
  cannot exist for any $q>p$.
\end{example}


\begin{para}
  Let us state at once that there do exist unbounded domains $\Omega$
  for which the imbedding~\eqref{eq:6.22} is compact. See Example~6.53.
  An example of such a domain was given by the authors in [AF2] and it provided
  a basis for an investigation of the general problem in [AF3].
  The approach of this latter paper is used in the following discussion.

  First we concern ourselves with necessary conditions for the compactness
  of~\eqref{eq:6.23} for $q\geq p$. These conditions involve rapid decay at
  infinity for any unbounded domain (see Theorem~6.45). The techniques
  involved in the proof also yield a strengthened version of Theorem~4.46,
  namely, Theorem~6.41, and a converse of the assertion [see Remark~4.13(3)]
  that $W^{m,p}(\Omega) \to L^q(\Omega)$ for $1\leq q<p$ if $\Omega$ has finite volume.

  A sufficient condition for the compactness of \eqref{eq:6.22} is given in
  Theorem~6.52. It applies to many domains, bounded and unbounded, to which
  neither the Rellich-Kondrachov theorem nor any generalization of that theorem
  obtained by the same methods can be applied. (e.g.~exponential cusps --- see Example~6.54).
\end{para}


\begin{para}[Tessellations and $\lambda$-fat Cubes]
  Let $T$ be a tessellation of $\mathbb{R}^n$ by closed $n$-cubes of edge length $h$.
  If $H$ is one of the cubes in $T$, let $N(H)$ denote the cube of edge length
  $3h$ concentric with $H$ and therefore consisting of the $3^n$ elements
  of $T$ that intersect $H$. We call $N(H)$ the \emph{neighborhood} of $H$.
  By the \emph{fringe} of $H$ we shall mean the shell $F(H) = N(H)-H$.

  Let $\Omega$ be a given domain in $\mathbb{R}^n$ and $T$ a give tessellation as above.
  Let $\lambda>0$. A cube $H\in T$ will be called $\lambda$-\emph{fat} (with respect to $\Omega$) if
  \[ \mu(H\cap\Omega) > \lambda \mu(F(H)\cap\Omega), \]
  where $\mu$ denotes the $n$-dimensional Lebesgue measure in $\mathbb{R}^n$.
  (We use $\mu$ instead of ``vol'' for notational simplicity in the following
  discussion where the symbol must be used many times.)
  If $H$ is not $\lambda$-fat then we will say it is $\lambda$-\emph{thin}.
\end{para}


\begin{theorem}
  Suppose there exists a compact imbedding of the form
  \[ W^{m,p}(\Omega) \to L^q(\Omega) \]
  for some $q\geq p$. Then for every $\lambda>0$ and every tessellation 
  $T$ of $\mathbb{R}^n$ by cubes of fixed size, $T$ can have only finitely
  many $\lambda$-fat cubes.
\end{theorem}

\begin{proof}
  Suppose, to the contrary, that for some $\lambda>0$ there exists a tessellation~$T$
  of $\mathbb{R}^n$ by cubes of edge length~$h$ containing a sequence
  $\{H_j\}_{j=1}^\infty$ of $\lambda$-fat cubes.
  Passing to a subsequence if necessary we may assume that $N(H_j)\cap N(H_i)$
  is empty whenever $j\neq i$. For each $j$ there exists $\phi_j\in C_0^\infty(N(H_j))$
  such that
  \begin{enumerate}[(i)]
    \item $|\phi_j(x)|\leq 1$ for all $x\in \mathbb{R}^n$,
    \item $\phi_j(x) = 1$ for $x\in H_j$, and
    \item $D^\alpha \phi_j(x)|\leq M$ for all $j$, all $x\in \mathbb{R}^n$, and all $\alpha$ satisfying $0\leq |\alpha|\leq m$.
  \end{enumerate}
  In fact, all the $\phi_j$ can be taken to be translates of one of them.
  Let $\psi_j = c_j\phi_j$, where the positive constants $c_j$ are chosen so that
  \[ \|\psi_j\|_{0,q,\Omega}^q \geq c_j^q \int_{H_j\cap\Omega} |\phi_j(x)|^q \d x
      = c_j^q \mu(H_j\cap\Omega) = 1. \]
  But then
  \begin{align*}
    \|\psi_j\|_{m,p,\Omega}^p
    & = c_j^p \sum_{0\leq |\alpha|\leq m} \int_{N(H_j)\cap\Omega} |D^\alpha \phi_j(x)|^p \d x \\
    & \leq M^p c_j^p \mu\bigl(N(H_j)\cap\Omega\bigr) \\
    & < M^p c_j^p \mu(H_j\cap\Omega) \biggl(1+\frac{1}{\lambda}\biggr)
      = M^p \biggl(1+\frac{1}{\lambda}\biggr) c_j^{p-q},
  \end{align*}
  since $H_j$ is $\lambda$-fat. Now $\mu(H_j\cap\Omega)\leq \mu(H_j) = h^n$
  so $c_j\geq h^{-n/q}$. Since $p-q\leq 0$, $\{\psi_j\}$ is bounded in $W^{m,p}(\Omega)$.
  But the functions $\psi_j$ have disjoint supports, so $\{\psi_j\}$ cannot be precompact
  in $L^q(\Omega)$, contradicting the assumption that $W^{m,p}(\Omega)\to L^q(\Omega)$
  is compact. Thus every $T$ can possess at most finitely many $\lambda$-fat cubes.
\end{proof}


\begin{corollary}
  Suppose that $W^{m,p}(\Omega)\to L^q(\Omega)$ for some $q>p$.
  If $T$ is a tessellation of $\mathbb{R}^n$ by cubes of fixed edge-length,
  and if $\lambda>0$ is given, then there exists $\epsilon>0$ such that
  $\mu(H\cap\Omega)\geq\epsilon$ for every $\lambda$-fat $H\in T$.
\end{corollary}

\begin{proof}
  Suppose, to the contrary, that there exists a sequence $\{H_j\}$ of $\lambda$-fat
  cubes with $\lim_{j\to\infty} \mu(H_j\cap\Omega)=0$.
  If $c_j$ is defined as in the above proof, we have $\lim_{j\to\infty} c_j=\infty$.
  But then $\lim_{j\to\infty} \|\psi_j\|_{m,p,\Omega}=0$ since $p<q$.
  Since $\{\psi_j\}$ is bounded away from $0$ in $L^q(\Omega)$, we have contradicted
  the continuity of the imbedding $W^{m,p}(\Omega) \to L^q(\Omega)$.
\end{proof}


\begin{remark}
  It follows from the above corollary that if there exists an imbedding
  \begin{equation}\label{eq:6.24}
    W^{m,p}(\Omega) \to L^q(\Omega)
  \end{equation}
  for some $q>p$ then one of the following alternatives must hold:
  \begin{enumerate}[(a)]
    \item There exists $\epsilon>0$ and a tessellation $T$ of $\mathbb{R}^n$
      consisting of cubes of fixed size such that $\mu(H\cap\Omega)\geq\epsilon$
      for infinitely many cubes $H\in T$.
    \item For every $\lambda>0$, every tessellation $T$ of $\mathbb{R}^n$
      consisting of cubes of fixed size contains only finitely many $\lambda$-fat cubes.
  \end{enumerate}
  We will show in Theorem~6.42 that (b) implies that $\Omega$ has finite volume.
  By Theorem~4.46, (b) is therefore inconsistent with the existence of (24)
  for $q>p$. On the other hand, (a) implies that $\mu\bigl(\{x\in\Omega: N\leq |x|\leq N+1\}\bigr)$
  does not approach zero as $N$ tends to infinity. We have therefore proved the following
  strengthening of Theorem~4.46.
\end{remark}


\begin{theorem}
  Let $\Omega$ be an unbounded domain in $\mathbb{R}^n$ satisfying
  \[ \limsup_{N\to\infty} \vol(\{x\in\Omega: N\leq |x|\leq N+1\}) = 0. \]
  Then there can be no imbedding of the form (24) for any $q>p$.
\end{theorem}


\begin{theorem}
  Suppose that imbedding (24) is compact for some $q\geq p$.
  Then $\Omega$ has finite volume.
\end{theorem}

\begin{proof}
  Let $T$ be a tessellation of $\mathbb{R}^n$ by cubes of unit edge length,
  and let $\lambda=1/[2(3^n-1)]$. Let $P$ be the union of the finitely many
  $\lambda$-fat cubes in $T$. Clearly $\mu(P\cap\Omega)\leq\mu(P)<\infty$.

  Let $H$ be a $\lambda$-thin cube in $T$. Let $H_1$ be one of the $3^n-1$
  cubes in $T$ constituting the fringe of $H$ selected so that $\mu(H_1\cap\Omega)$
  is maximal. Thus
  \[ \mu(H\cap\Omega) \leq \lambda \mu\bigl(F(H)\cap\Omega\bigr) 
      \leq \lambda (3^n-1) \mu(H_1\cap\Omega) = \frac12 \mu(H_1\cap\Omega). \]
  If $H_1$ is also $\lambda$-thin, then we may select a cube $H_2\in T$ with
  $H_2\subset F(H_1)$ such that $\mu(H_1\cap\Omega) \leq \frac12 \mu(H_2\cap\Omega)$.

  Suppose an infinite chain $\{H_1,H_2,\ldots\}$ of $\lambda$-thin cubes can be
  constructed in the above manner. Then
  \[ \mu(H\cap\Omega) \leq \frac12 \mu(H_1\cap\Omega) \leq \cdots
      \leq \frac{1}{2^j} \mu(H_j\cap\Omega) \leq \frac{1}{2^j} \]
  for each $j$ since $\mu(H_j\cap\Omega)\leq\mu(H_j)=1$.
  Hence $\mu(H\cap\Omega)=0$. Denoting by $P_\infty$ the union of $\lambda$-thin
  cubes $H\in T$ for which such an infinite chain can be constructed,
  we have $\mu(P_\infty\cap\Omega)=0$.

  Let $P_j$ denote the union of $\lambda$-thin cubes $H\in T$ for which
  some such chain ends on the $j$th step; that is, $H_j$ is $\lambda$-fat.
  Any particular $\lambda$-fat cube $H'$ can occur as the end $H_j$ of a chain
  beginning at $H$ only if $H$ is contained in the cube of edge $2j+1$
  centred on $H'$. Hence there are at most $(2j+1)^n$ such cubes $H\subset P_j$
  having $H'$ as chain endpoint. Thus
  \begin{align*}
    \mu(P_j\cap\Omega)
    & = \sum_{H\subset P_j} \mu(H\cap\Omega) \\
    & \leq \frac{1}{2^j} \sum_{H\subset P_j} \mu(H_j\cap\Omega) \\
    & \leq \frac{(2j+1)^n}{2^j} \sum_{H'\subset P} \mu(H'\cap\Omega)
      = \frac{(2j+1)^n}{2^j} \mu(P\cap\Omega),
  \end{align*}
  so that $\mu(\Omega) = \mu(P\cap\Omega) + \mu(P_\infty\cap\Omega) +
  \sum_{j=1}^\infty \mu(P_j\cap\Omega)<\infty$.
\end{proof}

Suppose $1\leq q<p$. If $\vol(\Omega)<\infty$, then the imbedding
\[ W^{m,p}(\Omega) \to L^q(\Omega) \]
exists because $W^{m,p}(\Omega) \to L^q(\Omega)$ trivially and $L^p(\Omega)\to L^q(\Omega)$
by Theorem~2.14.

We are now in a position to prove the converse.

\begin{theorem}
  If the imbedding $W^{m,p}(\Omega) \to L^q(\Omega)$ exists for some $p$
  and $q$ satisfying $1\leq q<p$, then $\Omega$ has finite volume.
\end{theorem}

\begin{proof}
  Let $T$, $\lambda$, and again let $P$ denote the union of the $\lambda$-fat
  cubes in $T$. If we can show that $\mu(P\cap\Omega)$ is finite, it will
  follow by the same argument used in that theorem that $\mu(\Omega)$ is finite.

  Accordingly, suppose that $\mu(P\cap\Omega)$ is not finite. Then there
  exists a sequence $\{H_j\}$ of $\lambda$-fat cubes in $T$ such that
  $\sum_{j=1}^\infty \mu(H_j\cap\Omega)=\infty$. If $L$ is the lattice of
  centres of cubes in $T$, we may break up $L$ into $3^n$ mutually disjoint
  sublattices $\{L_i\}_{i=1}^{3^n}$ each having period $3$ in each coordinate
  direction. For each $i$ let $T_i$ be the set of all cubes in $T$ that
  have centres in $L_i$. For some $i$ we must have
  $\sum_{\lambda-\text{fat}H\in T_i} \mu(H\cap\Omega)=\infty$. Thus we may
  assume that the cubes of the sequence $\{H_j\}$ all belong to $T_i$
  for some $i$, so that $N(H_j)\cap N(H_k)$ is empty if $j\neq k$.

  Choose integer $j_1$ so that
  \[ 2\leq \sum_{j=1}^{j_1} \mu(H_j\cap\Omega) < 4. \]
  Let $\phi_j$ be as in the proof of Theorem~6.38, and let
  \[ \psi_1(x) = 2^{-1/p} \sum_{j=1}^{j_1} \phi_j(x). \]
  Since the supports of the functions $\phi_j$ are mutually disjoint
  and since the cubes $H_j$ are $\lambda$-fat, for $|\alpha|\leq m$ we have
  \begin{align*}
    \|D^\alpha \psi_1\|_{0,p,\Omega}^p
    & = \frac12 \sum_{j=1}^{j_1} \int_\Omega |D^\alpha \phi_j(x)|^p \d x \\
    & \leq \frac12 M^p \sum_{j=1}^{j_1} \mu\bigl(N(H_j)\cap\Omega\bigr) \\
    & < \frac12 M^p \biggl(1+\frac{1}{\lambda}\biggr) \sum_{j=1}^{j_1} \mu(H_j\cap\Omega)
      < 2M^p \biggl(1+\frac{1}{\lambda}\biggr).
  \end{align*}
  On the other hand,
  \[ \|\psi\|_{0,q,\Omega}^q \geq 2^{-q/p} \sum_{j=1}^{j_1} \mu(H_j\cap\Omega)
      \geq 2^{1-(q/p)}. \]
  Having so defined $j_1$ and $\psi_1$, we can now define $j_2$, $j_3$, $\ldots$
  and $\psi_2$, $\psi_3$, $\ldots$ inductively so that
  \[ 2^k \leq \sum_{j=j_{k-1}+1}^{j_k} \mu(H_j\cap\Omega) < 2^{k+1} \]
  and
  \[ \psi_k(x) = 2^{-k/p} k^{-2/p} \sum_{j=j_{k-1}+1}^{j_k} \phi_j(x). \]
  As above, we have for $|\alpha|\leq m$,
  \[ \|D^\alpha \psi_k\|_{0,p,\Omega}^p \leq \frac{2}{k^2} M^p 
      \biggl(1+\frac{1}{\lambda}\biggr) \]
  and
  \[\|\psi_k\|_{0,q,\Omega}^q \geq 2^{k(1-q/p)} M^p \biggl(\frac{1}{k}\biggr)^{2q/p}. \]
  Thus $\psi=\sum_{k=1}^\infty \psi_k$ belongs to $W^{m,p}(\Omega)$
  but not to $L^q(\Omega)$ contradicting the imbedding $W^{m,p}(\Omega)\to L^q(\Omega)$.
  Hence $\mu(P\cap\Omega)<\infty$ as required.
\end{proof}


\begin{para}
  If there exists a compact imbedding of the form $W^{m,p}(\Omega)\to L^q(\Omega)$
  for some $q\geq p$, then, as we have shown, $\Omega$ has finite volume.
  In fact, considerably more is true; $\mu(\{x\in\Omega: |x|\geq R\})$
  must approach zero very rapidly as $R\to\infty$, as we shown in Theorem~6.45 below.

  If $Q$ is a union of cubes $H$ in some tessellation $T$ of $\mathbb{R}^n$
  by cubes of fixed edge length, we extend the notions of neighborhood
  and fringe to $Q$ in an obvious manner:
  \[ N(Q) = \bigcup_{\substack{H\in T \\ H\subset Q}} N(H),
      \qquad F(Q) = N(Q)-Q. \]
  Given $\delta>0$, let $\lambda=\delta/[3^n(1+\delta)]$. If all the cubes
  $H\in T$ satisfying $H\subset Q$ are $\lambda$-thin, then $Q$ is itself
  $\delta$-thin in the sense that
  \[ \mu(Q\cap\Omega) \leq \delta \mu\bigl(F(Q)\cap\Omega\bigr). \]
  To see this note that as $H$ runs through the cubes comprising $Q$,
  $F(H)$ covers $N(Q)$ at most $3^n$ times. Hence
  \begin{align*}
    \mu(Q\cap\Omega)
    & = \sum_{H\subset Q} \mu(H\cap\Omega)
      \leq \lambda\sum_{H\subset Q} \mu\bigl(F(H)\cap\Omega\bigr) \\
    & \leq 3^n \lambda \mu\bigl(N(Q)\cap\Omega\bigr)
      = 3^n \lambda \bigl[\mu(Q\cap\Omega) + \mu\bigl(F(Q)\cap\Omega\bigr)\bigr]
  \end{align*}
  and the fact that $Q$ is $\delta$-thin follows by transposition
  (permissible since $\mu(\Omega)<\infty$) and since $3^n\lambda/(1-3^n\lambda)=\delta$.

  For any measurable set $S\subset \mathbb{R}^n$ let $Q$ be the union of all
  cubes in $T$ whose interiors intersect $S$, and define
  $F(S)=f(Q)$. If $S$ is at a positive distance from the finitely
  many $\lambda$-fat cubes in $T$, then $Q$ consists of $\lambda$-thin
  cubes and we obtain
  \begin{equation}\label{eq:6.25}
    \mu(S\cap\Omega) \leq \mu(Q\cap\Omega) \leq \delta \mu\bigl(F(S)\cap\Omega\bigr).
  \end{equation}
\end{para}


\begin{theorem}[Rapid Decay]
  Suppose there exists a compact imbedding of the form
  \begin{equation}\label{eq:6.26}
    W^{m,p}(\Omega) \to L^q(\Omega)
  \end{equation}
  for some $q\geq p$. For each $r\geq 0$ let $\Omega_r = \{x\in\Omega:|x|>r\}$,
  let $S_r = \{x\in\Omega:|x|=r\}$, and let $A_r$ denote the surface area
  (Lebesgue $(n-1)$-measure) of $S_r$. Then
  \begin{enumerate}[(a)]
    \item For given $\epsilon$, $\delta>0$ there exists $R$ such that
      if $r\geq R$, then
      \[ \mu(\Omega_r) \leq \delta \mu(\{x\in\Omega: r-\epsilon\leq |x|\leq r\}). \]
    \item If $A_r$ is positive and ultimately nonincreasing as $r\to\infty$,
      then for each $\epsilon>0$
      \[ \lim_{r\to\infty} \frac{A_{r+\epsilon}}{A_r} = 0. \]
  \end{enumerate}
\end{theorem}

\begin{proof}
  Given $\epsilon>0$ and $\delta>0$, let $\lambda=\delta/[3^n(1+\delta)]$
  and let $T$ be a tessellation of $\mathbb{R}^n$ by cubes of edge
  length $\epsilon/(2\sqrt{n})$. Let $R$ be large enough that the finitely
  many $\lambda$-fat cubes in $T$ lie in the ball of radius $R-\epsilon/2$
  about the origin. If $r\geq R$ and $S=\Omega_r$, then any $H\in T$
  whose interior intersects $S$ is $\lambda$-thin. Moreover, any cube in the
  fringe of $S$ only intersect $\Omega$ at points $x$ satisfying 
  $r-\epsilon/2\leq |x|\leq r$. By \eqref{eq:6.25},
  \[ \mu(\Omega_r) = \mu(S\cap\Omega) \leq \delta\mu\bigl(F(S)\cap\Omega\bigr)
      = \delta\mu(\{x\in\Omega: r-\epsilon\leq |x|\leq r\}), \]
  which proves (a).

  For (b) choose $R_0$ so that $A_r$ is nonincreasing for $r\geq R_0$.
  Fix $\epsilon'$, $\delta>0$ and let $\epsilon=\epsilon'/2$.
  Let $R$ be as in (a). If $r\geq \max\{R,R_0+\epsilon'\}$, then
  \begin{align*}
    A_{r+\epsilon'}
    & \leq \frac{1}{\epsilon} \int_{r+\epsilon}^{r+2\epsilon} A_s \d s
      \leq \frac{1}{\epsilon} \mu(\Omega_{r+\epsilon}) \\
    & \leq \frac{\delta}{\epsilon} \mu(\{x\in\Omega: r\leq |x|\leq r+\epsilon\})
      = \frac{\delta}{\epsilon} \int_r^{r+\epsilon} A_s \d s \leq \delta A_r.
  \end{align*}
  Since $\epsilon'$ and $\delta$ are arbitrary, (b) follows.
\end{proof}


\begin{corollary}
  If there exists a compact imbedding of the form \eqref{eq:6.26}
  for some $q\geq p$, then for every $k>0$ we have
  \begin{equation}\label{eq:6.27}
    \lim_{r\to\infty} e^{kr} \mu(\Omega_r) = 0.
  \end{equation}
\end{corollary}

\begin{proof}
  Fix $k$ and let $\delta=e^{-(k+1)}$. From conclusion (a) of Theorem~6.45
  there exists $R$ such that $r\geq R$ implies $\mu(\Omega_{r+1})\leq\delta\mu(\Omega_r)$.
  Thus if $j$ is a positive integer and $0\leq t<1$, we have
  \begin{align*}
    e^{k(R+j+t)} \mu(\Omega_{R+j+t})
    & \leq e^{k(R+j+1)} \mu(\Omega_{R+j}) \\
    & \leq e^{k(R+1)} e^{kj} \delta^j \mu(\Omega_R)
      = e^{k(R+1)} \mu(\Omega_R) e^{-j}.
  \end{align*}
  The last term approaches zero as $j$ tends to infinity.
\end{proof}


\begin{remarks}
  \begin{enumerate}[1.]
    \item We work with Sobolev spaces defined intrinsically in domains.
      If instead, we had defined $W^{m,p}(\Omega)$ to consist of all restrictions
      to $\Omega$ of functions in $W^{m,p}(\mathbb{R}^n)$, then the outcome for
      corollary~6.46 would have been different. With that definition,
      it is shown in [BCs] that $W^{m,p}(\Omega)$ imbeds compactly
      in $L^p(\Omega)$ if and only if the volume of the intersection of $\Omega$
      with cubes of fixed edge-length tends to $0$ as the centres of those
      cubes tends to $\infty$. There are many domains $\Omega$ satisfying
      the latter condition but not satisfying \eqref{eq:6.27}. None of these
      domains can have any Sobolev extension property.
    \item The argument used in the proof of Theorem~6.45(a) works for any
      norm $\rho$ on $\mathbb{R}^n$ in place of the usual Euclidean norm
      $\rho(x) = |x|$. The same holds for Theorem~6.45(b) provided $A_r$
      is well defined (with respect to the norm $\rho$) and provided
      \[ \mu(\{x\in\Omega: r\leq \rho(x)\leq r+\epsilon\}) = \int_r^{r+\epsilon} A_s \d s. \]
      This is true, for example, if $\rho(x) = \max_{1\leq i\leq n} |x_i|$.
    \item For the proof of Theorem~6.45(b) it is sufficient that $A_r$
      have an equivalent nonincreasing majorant, that is, there should
      exist a positive, nonincreasing function $f(r)$ and a constant
      $M>0$ such that for sufficiently large $r$
      \[ A_r \leq f(r) \leq MA_r. \]
    \item Theorem~6.38 is sharper than Theorem~6.45, because the conclusions
      of the latter theorem are global whereas the compactness of \eqref{eq:6.26}
      depends on local properties of $\Omega$. We illustrate this by means of
      two examples.
  \end{enumerate}
\end{remarks}


\begin{example}
  Let $f\in C^1\bigl([0,\infty)\bigr)$ be positive and nonincreasing with
  bounded derivative $f'$. We consider the planar domain (Figure~5)
  \[ \Omega = \{(x,y)\in\mathbb{R}^2: x>0, 0<y<f(x)\}. \]
  With respect to the supremum norm on $\mathbb{R}^2$, that is
  $\rho(x,y) = \max\{|x|,|y|\}$, we have $A_s=f(s)$ for sufficiently large $s$.
  Hence $\Omega$ satisfies conclusion (b) of Theorem~6.45 (and, since $f$ is monotonic,
  conslusion (a) as well) if and only if
  \begin{equation}\label{eq:6.28}
    \lim_{s\to\infty} \frac{f(s+\epsilon)}{f(s)} = 0
  \end{equation}
  holds for every $\epsilon>0$. For example, $f(x) = \exp(-x^2)$ satisfies
  this condition but $f(x) = \exp(-x)$ does not. We shall show in Example~6.53
  that the imbedding
  \begin{equation}\label{eq:6.29}
    W^{m,p}(\Omega) \to L^p(\Omega)
  \end{equation}
  is compact if \eqref{eq:6.28} holds. Thus \eqref{eq:6.28} is necessary
  and sufficient for compactness of the above imbedding for domains of this type.
\end{example}


\begin{example}
  Let $f$ be as in the previous exmaple, and assume also that $f'(0)=0$.
  Let $g$ be a positive, nonincreasing function in $C^1\bigl([0,\infty)\bigr)$
  satisfying
  \begin{enumerate}[(i)]
    \item $g(0) = \frac12 f(0)$, and $g'(0)=0$,
    \item $g(x)<f(x)$ for all $x\geq 0$,
    \item $g(x)$ is constant on infinitely many disjoint intervals of unit length.
  \end{enumerate}
  Let $h(x)=f(x)-g(x)$ and consider the domain (Figure~6)
  \[ \tilde{\Omega} = \{(x,y)\in\mathbb{R}^2: 0<y<g(x)\ \text{if}\ x\geq 0,\ 
      0<y<h(-x)\ \text{if}\ x<0\}. \]
  Again we have $A_s=f(s)$ for sufficiently large $s$, so $\tilde{\Omega}$
  satisfies the conclusions of Theorem~6.45 if \eqref{eq:6.28} holds.

  If, however, $T$ is a tessellation of $\mathbb{R}^2$ by squares of edge
  length $\frac14$ having edges parallel to the coordinate axes, and if
  one of the squares in $T$ has centre at the origin, then $T$ has infinitely
  many $\frac13$-fat squares with centres on the position $x$-axis.
  By Theorem~6.38 the imbedding \eqref{eq:6.29} cannot be compact
  for the domain $\tilde{\Omega}$.
\end{example}


\section{Unbounded Domains---Compact Imbeddings of
  \texorpdfstring{$W^{m,p}(\Omega)$}{W\textasciicircum\{m,p\}()}}

\begin{para}[Flows]
  The above examples suggest that any sufficient condition for the
  compactness of the imbedding
  \[ W^{m,p}(\Omega) \to L^p(\Omega) \]
  for unbounded domains $\Omega$ must involve the rapid decay
  of volume locally in each branch of $\Omega_r$ as $r$ tends to infinity.
  A convenient way to express such local decay is in terms of flows on $\Omega$.

  By a \emph{flow} on $\Omega$ we mean a continuously differentiable map
  $\Phi: U \to \Omega$ where $U$ is an open set in $\Omega\times\mathbb{R}$
  containing $\Omega \times \{0\}$, and where $\Phi(x,0)=x$ for every $x\in\Omega$.

  For fixed $x\in\Omega$ the curve $t\to \Phi(x,t)$ is called a \emph{streamline}
  of the flow. For fixed $t$ the map $\Phi_t: x\to \Phi(x,t)$ sends a subset
  of $\Omega$ into $\Omega$. We shall be concerned with the Jacobian of this map:
  \[ \det \Phi_t'(x) = \frac{\partial(\Phi_1,\ldots,\Phi_n)}{\partial(x_1,\ldots,x_n)}
      \bigg|_{(x,t)}.\]
  It is sometimes required of a flow $\Phi$ that $\Phi_{s+t} = \Phi_s\circ\Phi_t$
  but we do not need this property and so do not assume it.
\end{para}


\begin{example}
  Let $\Omega$ be the domain of Example~6.48. Define the flow
  \[ \Phi(x,y,t) = \biggl(x-t, \frac{f(x-t)}{f(x)}y\biggr), \qquad 0<t<x. \]
  The direction of the flow is towards the line $x=0$ and the streamlines (some
  of which are shown in Figure~7) diverges as the domain widens. $\Phi$ is a local
  magnification for $t>0$:
  \[ \det\Phi_t'(x,y) = \frac{f(x-t)}{f(x)}. \]
  Note that $\lim_{x\to\infty} \det\Phi_t'(x,y) = \infty$ if $f$ satisfies~\eqref{eq:6.28}.

  For $N=1,2,\ldots$ let $\Omega_N^* = \{(x,y)\in\Omega: 0<x<N\}$.
  Since $\Omega_N^*$ is bounded and satisfies the cone condition, the imbedding
  \[ W^{1,p}(\Omega_N^*) \to L^p(\Omega_N^*) \]
  is compact. This compactness, together with properties of the flow $\Phi$
  are sufficient to force the compactness of $W^{m,p}(\Omega)\to L^p(\Omega)$
  as we now show.
\end{example}


\begin{theorem}
  Let $\Omega$ be an open set in $\mathbb{R}^n$ having the following properties:
  \begin{enumerate}[(a)]
    \item There exists an infinite sequence $\{\Omega_N^*\}_{N=1}^\infty$ of open subsets
      of $\Omega$ such that $\Omega_N^*\subset\Omega_{N+1}^*$ and such that for each
      $N$ the imbedding
      \[ W^{1,p}(\Omega_N^*) \to L^p(\Omega_N^*) \]
      is compact.
    \item There exists a flow $\Phi: U\to\Omega$ such that if $\Omega_N = \Omega - \Omega_N^*$,
      then
      \begin{enumerate}[(i)]
        \item $\Omega_N \times [0,1] \subset U$ for each $N$,
        \item $\Phi_t$ is one-to-one for all $t$,
        \item $|(\partial/\partial t) \Phi(x,t)| \leq M$ (constant) for all $(x,t)\in U$.
      \end{enumerate}
    \item The fucntions $d_N(t) = \sup_{x\in\Omega_N} |\det\Phi_t'(x)|^{-1}$ satisfy
      \begin{enumerate}[(i)]
        \item $\lim_{N\to\infty} d_N(1) = 0$,
        \item $\lim_{N\to\infty} \int_0^1 d_N(t) \d t = 0$.
      \end{enumerate}
  \end{enumerate}
  Then the imbedding $W^{m,p}(\Omega)\to L^p(\Omega)$ is compact.
\end{theorem}

\begin{proof}
  Since we have $W^{m,p}(\Omega) \to W^{1,p}(\Omega) \to L^p(\Omega)$
  it is sufficient to prove that the latter imbedding is compact.
  Let $u\in C^1(\Omega)$. For each $x\in\Omega_N$ we have
  \[ u(x) = u\bigl(\Phi_1(x)\bigr)
      - \int_0^1 \frac{\partial}{\partial t} u\bigl(\Phi_t(x)\bigr) \d t. \]
  Now
  \begin{align*}
    \int_{\Omega_N} \bigl|u\bigl(\Phi_1(x)\bigr)\bigr| \d x
    & \leq d_N(1) \int_{\Omega_N} \bigl|u\bigl(\Phi_1(x)\bigr)\bigr|
        \bigl|\det\Phi_1'(x)\bigr| \d x \\
    & = d_N(1) \int_{\Phi_1(\Omega_N)} |u(y)| \d y \\
    & \leq d_N(1) \int_{\Omega} |u(y)| \d y.
  \end{align*}
  Also
  \begin{align*}
    \int_{\Omega_N} \biggl|\int_0^1 \frac{\partial}{\partial t} u\bigl(\Phi_t(x)\bigr) \d t \biggr| \d x
    & \leq \int_{\Omega_N} \d x \int_0^1 \bigl|\nabla u\bigl(\Phi_t(x)\bigr)\bigr|
        \biggl|\frac{\partial}{\partial t} \Phi_t(x)\biggr| \d t \\
    & \leq M \int_0^1 d_N(t) \d t \int_{\Omega_N} \bigl|\nabla u\bigl(\Phi_t(x)\bigr)\bigr|
        \bigl|\det\Phi_t'(x)\bigr| \d x \\
    & \leq M\biggl(\int_0^1 d_N(t) \d t\biggr) \biggl(\int_{\Omega} |\nabla u(y)| \d y\biggr).
  \end{align*}
  Putting $\delta_N = \max\bigl\{d_N(1), M \int_0^1 d_N(t)\d t\bigr\}$, we have
  \begin{equation}\label{eq:6.30}
    \int_{\Omega_N} |u(x)| \d x
    \leq \delta_N \int_{\Omega} \bigl(|u(y)| + |\nabla u(y)|\bigr) \d y
    \leq \delta_N \|u\|_{1,1,\Omega}
  \end{equation}
  and $\lim_{N\to\infty} \delta_N = 0$.

  Now suppose $u$ is real-valued and belongs to $C^1(\Omega)\cap W^{1,p}(\Omega)$.
  By H\"older's inequality, the distributional derivatives of $|u|^p$
  \[ D_j |u|^p = p\cdot |u|^{p-1}\cdot \sgn u\cdot D_j u, \]
  satisfy
  \[ \int_{\Omega} \bigl|D_j u(x)|^p\bigr| \d x
      \leq p\|D_ju\|_{0,p,\Omega} \|u\|_{0,p,\Omega}^{p-1} \leq p\|u\|_{1,p,\Omega}^p. \]
  Thus $|u|^p\in W^{1,1}(\Omega)$ and by Theorem~3.17 there is a sequence $\{\phi_j\}$
  of functions in $C^1(\Omega)\cap W^{1,1}(\Omega)$ such that
  $\lim_{j\to\infty} \bigl\|\phi_j - |u|^p\bigr\|_{1,1,\Omega} = 0$. Thus, by (30)
  \begin{align*}
    \int_{\Omega_N} |u(x)|^p \d x
    & = \lim_{j\to\infty} \int_{\Omega_N} \phi_j(x) \d x
      \leq \limsup_{j\to\infty} \delta_N \|\phi_j\|_{1,1,\Omega} \\
    & \leq \delta_N \bigl\| |u|^p \bigr\|_{1,1,\Omega}
      \leq K \delta_N \|u\|_{1,p,\Omega}^p,
  \end{align*}
  where $K=K(n,p)$. This inequality holds for arbitrary complex-valued function
  $u\in C^1(\Omega)\cap W^{1,p}(\Omega)$ by virtue of its separate applications
  to the real and imaginary parts of $u$.

  If $S$ is a bounded set in $W^{1,p}(\Omega)$ and $\epsilon>0$, we may,
  by the above inequality, select $N$ so that for all $u\in S$
  \[ \int_{\Omega_N} |u(x)|^p \d x < \epsilon. \]
  Since $W^{1,p}(\Omega-\Omega_N) \to L^p(\Omega-\Omega_N)$ is compact,
  the precompactness of $S$ in $L^p(\Omega)$ follows by Theorem~2.33.
  Hence $W^{1,p}(\Omega)\to L^p(\Omega)$ is compact.
\end{proof}


\begin{example}
  Consider again the domain of Examples~6.48 and 6.51 and the flow $\Phi$
  given in the latter example. We have
  \[ d_N(t) = \sup_{x\geq N} \frac{f(x)}{f(x-t)} \leq 1 \qquad \text{if}\ 0\leq t\leq 1 \]
  and by \eqref{eq:6.28}
  \[ \lim_{N\to\infty} d_N(t) = 0 \qquad \text{if}\ t>0. \]
  Thus by dominated convergence
  \[ \lim_{N\to\infty} \int_0^1 d_N(t) \d t = 0. \]
\end{example}